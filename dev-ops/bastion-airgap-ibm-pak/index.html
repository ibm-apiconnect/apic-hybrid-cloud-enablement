
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../api-key-for-sso/">
      
      
        <link rel="next" href="../create-oidc-users-from-ldap/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.3">
    
    
      
        <title>Bastion for IBM Cloud Pak on Airgap OpenShift - IBM Hybrid Cloud Enablement</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.d7758b05.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#bastion-for-ibm-cloud-pak-on-airgap-openshift" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="IBM Hybrid Cloud Enablement" class="md-header__button md-logo" aria-label="IBM Hybrid Cloud Enablement" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IBM Hybrid Cloud Enablement
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Bastion for IBM Cloud Pak on Airgap OpenShift
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="IBM Hybrid Cloud Enablement" class="md-nav__button md-logo" aria-label="IBM Hybrid Cloud Enablement" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    IBM Hybrid Cloud Enablement
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    IBM Concert
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            IBM Concert
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../IBM%20Concert/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    AI
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            AI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../IBM%20Concert/AI/watsonx-integration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Watsonx integration
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    App 360 View
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            App 360 View
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../IBM%20Concert/App%20360%20View/app-360-view/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    App 360 view
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    OCP
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            OCP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../IBM%20Concert/OCP/Deployment-with-CPFS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deployment with CPFS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../IBM%20Concert/OCP/Deployment-without-CPFS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deployment without CPFS
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    REST
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            REST
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../IBM%20Concert/REST/rest-api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rest api
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    SBOM
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            SBOM
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../IBM%20Concert/SBOM/application-definition/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Application definition
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../IBM%20Concert/SBOM/environment-definition/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Environment definition
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../IBM%20Concert/SBOM/generate-sbom/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generate sbom
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../IBM%20Concert/SBOM/pipelines/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pipelines
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    User Management
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            User Management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../IBM%20Concert/User%20Management/idp-integration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Idp integration
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8" >
        
          
          <label class="md-nav__link" for="__nav_2_8" id="__nav_2_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    VM
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8">
            <span class="md-nav__icon md-icon"></span>
            VM
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../IBM%20Concert/VM/Deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deployment
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9" >
        
          
          <label class="md-nav__link" for="__nav_2_9" id="__nav_2_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Ingestion
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_9">
            <span class="md-nav__icon md-icon"></span>
            Ingestion
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../IBM%20Concert/ingestion/External-system-ingest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    External system ingest
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../IBM%20Concert/ingestion/api-upload/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Api upload
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../IBM%20Concert/ingestion/toolkit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Toolkit
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../IBM%20Concert/ingestion/ui-upload/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ui upload
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_10" >
        
          
          <label class="md-nav__link" for="__nav_2_10" id="__nav_2_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Workflows
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_10">
            <span class="md-nav__icon md-icon"></span>
            Workflows
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../IBM%20Concert/workflows/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Architecture
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/APIC-HA-Architectures/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    High Availability with Two Data Centers
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Datapower
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Datapower
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../datapower/DP-LogTarget-no-WebGUI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DataPower Log Target without WebGUI - Example
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../datapower/DataPower-Config-without-WebGUI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DataPower Config without WebGUI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../datapower/NBLeak-playbook/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NB Leak playbook
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../datapower/Port-DataPower-Service-to-OpenShift/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Port DataPower Services to OpenShift
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Dev ops
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Dev ops
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Publish-APIVersion-to-COrg/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Products &amp; Consumer Subscriptions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-key-for-sso/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generate API Key for SSO Login in 7 Steps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Bastion for IBM Cloud Pak on Airgap OpenShift
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Bastion for IBM Cloud Pak on Airgap OpenShift
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#goals" class="md-nav__link">
    <span class="md-ellipsis">
      Goals
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Goals">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#target-audience" class="md-nav__link">
    <span class="md-ellipsis">
      Target Audience
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-linux-bastion" class="md-nav__link">
    <span class="md-ellipsis">
      Configure Linux Bastion
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configure Linux Bastion">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bastion-os-tools" class="md-nav__link">
    <span class="md-ellipsis">
      Bastion OS &amp; tools
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-ocpcp4i-bastion-tools" class="md-nav__link">
    <span class="md-ellipsis">
      Install OCP/CP4I bastion tools
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env-variables-for-apic-images" class="md-nav__link">
    <span class="md-ellipsis">
      ENV Variables for APIC images
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#private-container-registry" class="md-nav__link">
    <span class="md-ellipsis">
      Private container registry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Private container registry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-local-repositories-for-authentication-certificates-data" class="md-nav__link">
    <span class="md-ellipsis">
      Create local repositories for authentication, certificates &amp; data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-an-insecure-container-registry" class="md-nav__link">
    <span class="md-ellipsis">
      Create an insecure container registry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#call-out-1-create-a-secure-container-registry" class="md-nav__link">
    <span class="md-ellipsis">
      Call Out 1: Create a secure container registry
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mirror-images-to-your-private-container-registry" class="md-nav__link">
    <span class="md-ellipsis">
      Mirror images to your private container registry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Mirror images to your private container registry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup-ibm-pak" class="md-nav__link">
    <span class="md-ellipsis">
      Setup ibm-pak
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#populate-bastion-with-images" class="md-nav__link">
    <span class="md-ellipsis">
      Populate bastion with images
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-the-ocp-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Configure the OCP cluster
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configure the OCP cluster">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configure-the-ocp-pull-secret-for-the-apic-registry" class="md-nav__link">
    <span class="md-ellipsis">
      Configure the OCP pull-secret for the APIC registry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-the-ocp-imagecontentsourcepolicy-icsp" class="md-nav__link">
    <span class="md-ellipsis">
      Create the OCP ImageContentSourcePolicy (ICSP)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connect-your-registry-to-ocp" class="md-nav__link">
    <span class="md-ellipsis">
      Connect your registry to OCP
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-catalog-sources" class="md-nav__link">
    <span class="md-ellipsis">
      Install Catalog Sources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-operators-api-connect" class="md-nav__link">
    <span class="md-ellipsis">
      Install Operators &amp; API Connect
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#update-apic-with-new-release" class="md-nav__link">
    <span class="md-ellipsis">
      Update APIC with new release
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rebuild-bastion-repository" class="md-nav__link">
    <span class="md-ellipsis">
      Rebuild bastion repository
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Rebuild bastion repository">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-the-new-bastion" class="md-nav__link">
    <span class="md-ellipsis">
      Build the new bastion
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#call-outs-for-secure-registry" class="md-nav__link">
    <span class="md-ellipsis">
      Call Outs for Secure Registry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Call Outs for Secure Registry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-secure-container-registry" class="md-nav__link">
    <span class="md-ellipsis">
      Create a secure container registry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connect-your-secure-registry-to-ocp" class="md-nav__link">
    <span class="md-ellipsis">
      Connect your secure registry to OCP
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      References
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../create-oidc-users-from-ldap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create LDAP users in OIDC
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../global-error-policy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Global Error Policy: Mask Sensitive Data
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Governance
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Governance
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/APIC-Governance-Version/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Governance &amp; Version Control for API Products
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../governance/APIC-Governance-in-APIM/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    APIC Governance in APIM
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="bastion-for-ibm-cloud-pak-on-airgap-openshift">Bastion for IBM Cloud Pak on Airgap OpenShift<a class="headerlink" href="#bastion-for-ibm-cloud-pak-on-airgap-openshift" title="Permanent link">&para;</a></h1>
<blockquote>
<p>Ravi Ramnarayan<br />
 &copy; IBM v3.89  2023-05-22     </p>
</blockquote>
<h2 id="goals">Goals<a class="headerlink" href="#goals" title="Permanent link">&para;</a></h2>
<p>For IBM clients who operate disconnected (airgap) IT, the bastion host and registry are long term investments. This document provides steps to build and maintain the bastion host and container registry for IBM Cloud Pak for Integration (CP4I) products.  </p>
<ul>
<li>Build <em>insecure</em> or <em>secure</em> image registries  </li>
<li>Update the registry  </li>
<li>Rebuild the registry   </li>
</ul>
<h3 id="target-audience">Target Audience<a class="headerlink" href="#target-audience" title="Permanent link">&para;</a></h3>
<ul>
<li>IT Professionals with in depth knowledge of Linux, Kubernetes (k8s) and Openshift (OCP) <br />
  The skills to build the bastion host and the private container registry.  </li>
<li>Experience with IBM Cloud Paks, API Connect and DataPower  <br />
  If you wish to install IBM API Connect (APIC) after building the bastion and registry.  </li>
</ul>
<h2 id="configure-linux-bastion">Configure Linux Bastion<a class="headerlink" href="#configure-linux-bastion" title="Permanent link">&para;</a></h2>
<p>Our focus is <a href="https://www.ibm.com/docs/en/SSGT7J_22.2/install/install_airgap_bastion.html"><strong>Mirroring images with a bastion host</strong></a>. For the larger context, please see <a href="https://www.ibm.com/docs/en/cloud-paks/cp-integration/2022.2?topic=images-mirroring-air-gapped-cluster">Mirroring images for an air-gapped cluster</a>.   </p>
<h3 id="bastion-os-tools">Bastion OS &amp; tools<a class="headerlink" href="#bastion-os-tools" title="Permanent link">&para;</a></h3>
<ul>
<li>RHEL 8.6, 9.x work okay    </li>
<li><code>root</code> user<br />
  For expedience, it is convenient to run as <code>root</code>. Not good practice.  </li>
<li>Verify <code>openssl version &gt;= 1.1.1</code>  </li>
<li>Install <code>podman</code> &amp; <code>httpd-tools</code><br />
<code>dnf install podman</code><br />
<code>dnf install httpd-tools</code>  </li>
</ul>
<h3 id="install-ocpcp4i-bastion-tools">Install OCP/CP4I bastion tools<a class="headerlink" href="#install-ocpcp4i-bastion-tools" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>OpenShift <code>oc</code> command<br />
  Get it from your OCP installation.<br />
  <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>mv oc /usr/local/bin/
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>$ oc version
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>Client Version: 4.8.36
</code></pre></div></p>
</li>
<li>
<p>Install <code>ibm-pak</code><br />
  Download the latest version from <a href="https://github.com/IBM/ibm-pak/releases">IBM/ibm-pak/releases</a>.
  <div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>tar -xf oc-ibm_pak-linux-amd64.tar.gz  
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>mv oc-ibm_pak-linux-amd64 /usr/local/bin/oc-ibm_pak  
</code></pre></div>
  Confirm <code>ibm-pak</code> installation:<br />
<code>oc ibm-pak --help</code> </p>
</li>
<li>
<p>Set color ouptut (optional)<br />
<code>oc ibm-pak config color --enable true</code>  </p>
</li>
</ul>
<h3 id="env-variables-for-apic-images">ENV Variables for APIC images<a class="headerlink" href="#env-variables-for-apic-images" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Environment variables <br />
<a href="https://www.ibm.com/docs/en/cloud-paks/cp-integration/2022.4?topic=cluster-mirroring-images-bastion-host">Mirroring images with a bastion host</a> section <strong><em>Set environment variables and download CASE files</em></strong> specifies <code>env</code> settings. <a href="https://www.ibm.com/docs/en/api-connect/10.0.5.x_lts?topic=installation-operator-operand-case-versions">Operator, operand, and CASE versions</a> contains appropriate values for the desired APIC version.<br />
  <div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a># For APIC  
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>export CASE_NAME=ibm-apiconnect
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>export CASE_VERSION=4.0.2
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>export ARCH=amd64
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>export TARGET_REGISTRY=`hostname -f`:5000
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a># File to hold cp.icr.io authentication
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a># *** Do NOT set this env at the start ***
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a># Follow the steps in this document  
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a># export REGISTRY_AUTH_FILE=/opt/registry/auth/cp-auth.json
</code></pre></div></p>
</li>
<li>
<p>Activate &amp; verify environment variables 
  <div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>  $ echo $CASE_VERSION
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>  4.0.2
</code></pre></div></p>
</li>
</ul>
<h2 id="private-container-registry">Private container registry<a class="headerlink" href="#private-container-registry" title="Permanent link">&para;</a></h2>
<p>Your enterprise might have an existing private container registry. You could:  </p>
<ul>
<li>Use the existing corporate registry for IBM Cloud Pak images  </li>
<li>Create a new registry for IBM Cloud Pak images<br />
  You can make the private container registry <em>insecure</em> or <em>secure</em>, depending on your corporate standards. The <em>insecure</em> registry is the main flow of the document. Two tables contrast simple steps for <em>Insecure</em> &amp; <em>Secure</em> registries. Complex <em>Secure</em> registry steps are in <strong>call out</strong> segments.     </li>
</ul>
<h3 id="create-local-repositories-for-authentication-certificates-data">Create local repositories for authentication, certificates &amp; data<a class="headerlink" href="#create-local-repositories-for-authentication-certificates-data" title="Permanent link">&para;</a></h3>
<blockquote>
<p><strong><em>Note</em></strong>: instead of <code>/opt</code>, choose a base directory which is under your (non-root user) control.       </p>
</blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>mkdir -p /opt/registry/{auth,certs,data}
</code></pre></div>
<ul>
<li>Generate basic auth credentials<br />
  <div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>podman run --entrypoint htpasswd \
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>  docker.io/library/httpd:2 -Bbn &lt;user&gt; &lt;paswd&gt; &gt; /opt/registry/auth/htpasswd
</code></pre></div>
    <!-- docker.io/library/httpd:2 -Bbn mycoadmin mycoadmanure > /opt/registry/auth/htpasswd --><ul>
<li>b provides the password via command  </li>
<li>B stores the password using Bcrypt encryption  </li>
<li>n display in standard output    </li>
</ul>
</li>
</ul>
<h3 id="create-an-insecure-container-registry">Create an <em>insecure</em> container registry<a class="headerlink" href="#create-an-insecure-container-registry" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>podman run -d --name apic-registry -p 5000:5000 \
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>  -v /opt/registry/data:/var/lib/registry \
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>  -v /opt/registry/auth:/auth \
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>  -e &quot;REGISTRY_AUTH=htpasswd&quot; \
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>  -e &quot;REGISTRY_AUTH_HTPASSWD_REALM=Registry Realm&quot; \
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>  -e REGISTRY_AUTH_HTPASSWD_PATH=/auth/htpasswd \
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>  --restart=always \
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>  docker.io/library/registry:2
</code></pre></div>
<blockquote>
<h3 id="call-out-1-create-a-secure-container-registry"><a href="#create-a-secure-container-registry"><em>Call Out 1</em>: Create a <em>secure</em> container registry</a><a class="headerlink" href="#call-out-1-create-a-secure-container-registry" title="Permanent link">&para;</a></h3>
<h4 id="return-from-call-out-1">Return from Call Out 1<a class="headerlink" href="#return-from-call-out-1" title="Permanent link">&para;</a></h4>
</blockquote>
<h2 id="mirror-images-to-your-private-container-registry">Mirror images to your private container registry<a class="headerlink" href="#mirror-images-to-your-private-container-registry" title="Permanent link">&para;</a></h2>
<h3 id="setup-ibm-pak">Setup <code>ibm-pak</code><a class="headerlink" href="#setup-ibm-pak" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Configure the plug-in to download CASEs as OCI artifacts from IBM Cloud Container Registry (ICCR).<br />
  <div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>oc ibm-pak config repo &#39;IBM Cloud-Pak OCI registry&#39; \
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>  -r oci:cp.icr.io/cpopen --enable  
</code></pre></div></p>
</li>
<li>
<p>Download the API Connect image inventory
  <div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>oc ibm-pak get $CASE_NAME \
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>  --version $CASE_VERSION
</code></pre></div>
  The files will be placed in <code>$HOME/.ibm-pak</code>.  </p>
</li>
<li>
<p>Generate mirror manifests<br />
  <div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>oc ibm-pak generate mirror-manifests \
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>  $CASE_NAME $TARGET_REGISTRY --version $CASE_VERSION  
</code></pre></div>
  The command creates files to configure OCP in <code>~/.ibm-pak/data/mirror/$CASE_NAME/$CASE_VERSION</code>:<br />
<code>catalog-sources.yaml</code><br />
<code>catalog-sources-linux-&lt;arch&gt;.yaml</code> (arch specific catalog sources)<br />
<code>image-content-source-policy.yaml</code><br />
<code>images-mapping.txt</code>  </p>
</li>
<li>
<p><strong><em>Preemptive fix</em></strong> for CASE_NAME <code>ibm-apiconnect</code><br />
  Apply the fix described in <a href="https://www.ibm.com/docs/en/datapower-operator/1.6?topic=issues-airgap-unable-retrieve">Airgap install failure due to <code>unable to retrieve source image docker.io</code></a> to <code>~/.ibm-pak/data/mirror/$CASE_NAME/$CASE_VERSION/images-mapping.txt</code>. Please use the workaround as long as the link <a href="https://www.ibm.com/docs/en/datapower-operator/1.6?topic=issues-airgap-unable-retrieve">Airgap install failure due to 'unable to retrieve source image docker.io'</a> is active.  </p>
<blockquote>
<p><strong><em>Note</em></strong>: Include this step in your dev-ops process.</p>
</blockquote>
</li>
<li>
<p>Configure credentials for the IBM Entitled Registry on Bastion</p>
<ul>
<li>Define <code>$REGISTRY_AUTH_FILE</code> file to hold credentials  </li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a># File to hold cp.icr.io authentication for APIC
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>export REGISTRY_AUTH_FILE=/opt/registry/auth/cp-auth.json
</code></pre></div>
<ul>
<li>Populate <code>$REGISTRY_AUTH_FILE</code> with <em>IBM Entitlement Key</em> credentials for <code>cp.icr.io</code>  </li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a># podman login cp.icr.io
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>Username: cp
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>Password: &lt;IBM Entitlement Key&gt;
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>Login Succeeded!
</code></pre></div>
<ul>
<li>Populate <code>$REGISTRY_AUTH_FILE</code> with <code>apic-registry</code> credentials  </li>
</ul>
<table>
<thead>
<tr>
<th>Insecure Registry</th>
<th>Secure Registry</th>
</tr>
</thead>
<tbody>
<tr>
<td><code># podman login $TARGET_REGISTRY --tls-verify=false</code></td>
<td><code># podman login $TARGET_REGISTRY</code></td>
</tr>
<tr>
<td><code>Username: &lt;user&gt;</code></td>
<td><code>Username: &lt;user&gt;</code></td>
</tr>
<tr>
<td><code>Password: &lt;password&gt;</code></td>
<td><code>Password: &lt;password&gt;</code></td>
</tr>
<tr>
<td><code>Login Succeeded!</code></td>
<td><code>Login Succeeded!</code></td>
</tr>
</tbody>
</table>
<ul>
<li>Confirm $REGISTRY_AUTH_FILE contains both credentials<br />
  <div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>cat $REGISTRY_AUTH_FILE
</code></pre></div></li>
</ul>
</li>
</ul>
<blockquote>
<p><strong><em>Note</em></strong>: Backup specific files and folders from <code>~/.ibm-pak</code>, as detailed in <a href="#rebuild-bastion-repository">Rebuild bastion repository</a>.  </p>
</blockquote>
<h3 id="populate-bastion-with-images">Populate bastion with images<a class="headerlink" href="#populate-bastion-with-images" title="Permanent link">&para;</a></h3>
<p>Fork the job to the background, as it could run for hours.</p>
<h4 id="redable-version-of-oc-image-mirror-command">Redable version of <code>oc image mirror</code> command<a class="headerlink" href="#redable-version-of-oc-image-mirror-command" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Insecure Registry</th>
<th>Secure Registry</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>nohup oc image mirror \</code></td>
<td><code>nohup oc image mirror \</code></td>
</tr>
<tr>
<td><code>-f ~/.ibm-pak/data/mirror/$CASE_NAME/$CASE_VERSION/images-mapping.txt \</code></td>
<td><code>-f ~/.ibm-pak/data/mirror/$CASE_NAME/$CASE_VERSION/images-mapping.txt \</code></td>
</tr>
<tr>
<td><code>-a $REGISTRY_AUTH_FILE \</code></td>
<td><code>-a $REGISTRY_AUTH_FILE \</code></td>
</tr>
<tr>
<td><code>--insecure  \</code></td>
<td><code>--filter-by-os '.*'  \</code></td>
</tr>
<tr>
<td><code>--filter-by-os '.*'  \</code></td>
<td><code>--skip-multiple-scopes \</code></td>
</tr>
<tr>
<td><code>--skip-multiple-scopes \</code></td>
<td><code>--max-per-registry=1 \</code></td>
</tr>
<tr>
<td><code>--max-per-registry=1 \</code></td>
<td><code>--continue-on-error=true &gt; my-mirror-progress.txt  2&gt;&amp;1 &amp;</code></td>
</tr>
<tr>
<td><code>--continue-on-error=true &gt; my-mirror-progress.txt  2&gt;&amp;1 &amp;</code></td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="copypaste-friendly-version-of-oc-image-mirror-command">Copy/paste friendly version of <code>oc image mirror</code> command<a class="headerlink" href="#copypaste-friendly-version-of-oc-image-mirror-command" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Insecure Registry</th>
<th>Secure Registry</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>nohup oc image mirror -f ~/.ibm-pak/data/mirror/$CASE_NAME/$CASE_VERSION/images-mapping.txt -a $REGISTRY_AUTH_FILE --insecure --filter-by-os '.*' --skip-multiple-scopes --max-per-registry=1 --continue-on-error=true &gt; my-mirror-progress.txt  2&gt;&amp;1 &amp;</code></td>
<td><code>nohup oc image mirror -f ~/.ibm-pak/data/mirror/$CASE_NAME/$CASE_VERSION/images-mapping.txt -a $REGISTRY_AUTH_FILE --filter-by-os '.*' --skip-multiple-scopes --max-per-registry=1 --continue-on-error=true &gt; my-mirror-progress.txt  2&gt;&amp;1 &amp;</code></td>
</tr>
</tbody>
</table>
<h4 id="rinse-repeat">Rinse &amp; repeat<a class="headerlink" href="#rinse-repeat" title="Permanent link">&para;</a></h4>
<p>Observe progress with <code>ps &lt;pid&gt;</code>, <code>top</code> and <code>tail my-mirror-progress.txt</code>. When the job completes, search <code>my-mirror-progress.txt</code> for "<code>error</code>".   </p>
<ul>
<li>If the job fails with "<code>too many requests</code>", run it again. <br />
  Rinse &amp; repeat until it completes with "<code>info: Mirroring completed in 8m33.3s (12.65MB/s)</code>".    </li>
<li>If you see "<code>unable to retrieve source image docker.io/ibmcom/</code>":<br />
  Apply the fix described in <a href="https://www.ibm.com/docs/en/datapower-operator/1.6?topic=issues-airgap-unable-retrieve">Airgap install failure due to 'unable to retrieve source image docker.io'</a> to <code>~/.ibm-pak/data/mirror/$CASE_NAME/$CASE_VERSION/images-mapping.txt</code>. And run the <code>oc image mirror</code> command again.  </li>
</ul>
<h2 id="configure-the-ocp-cluster">Configure the OCP cluster<a class="headerlink" href="#configure-the-ocp-cluster" title="Permanent link">&para;</a></h2>
<p>Login to OCP CLI   </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>oc login --token=sha256~ejwjQ79...nvFbQYYyOc --server=https://api.rr4.cp.myco.com:6443
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>Logged into &quot;https://api.rr4.cp.myco.com:6443&quot; as &quot;kube:admin&quot; using the token provided.
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>You have access to 63 projects, the list has been suppressed. You can list all projects with &#39;oc projects&#39;  
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>Using project &quot;default&quot;.  
</code></pre></div>
<h3 id="configure-the-ocp-pull-secret-for-the-apic-registry">Configure the OCP <em>pull-secret</em> for the APIC registry<a class="headerlink" href="#configure-the-ocp-pull-secret-for-the-apic-registry" title="Permanent link">&para;</a></h3>
<p>Steps are from <a href="https://www.ibm.com/docs/en/openshift?source=https%3A%2F%2Fdocs.openshift.com%2Fcontainer-platform%2F4.10%2Fopenshift_images%2Fmanaging_images%2Fusing-image-pull-secrets.html%23images-update-global-pull-secret_using-image-pull-secrets&amp;referrer=SSGT7J_22.2%2Finstall%2Finstall_airgap_bastion.html">Updating the global cluster pull secret</a></p>
<p>You may use the steps below or use OCP GUI.  </p>
<ul>
<li>Download the OCP <code>pull-secret</code><br />
  <div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>export PULL_SECRET_LOCATION=&quot;pull_secret_location.json&quot;  
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>oc get secret/pull-secret -n openshift-config \
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>  --template=&#39;{{index .data &quot;.dockerconfigjson&quot; | base64decode}}&#39; &gt; \
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>  $PULL_SECRET_LOCATION  
</code></pre></div></li>
<li>
<p>Append your registry credentials to $PULL_SECRET_LOCATION <br />
  The command will NOT change existing credentials.
  <div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>oc registry login --registry=&quot;$TARGET_REGISTRY&quot; \
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>  --auth-basic=&quot;&lt;user&gt;:&lt;paswd&gt;&quot; --to=$PULL_SECRET_LOCATION   
</code></pre></div></p>
</li>
<li>
<p>Update the OCP <code>pull-secret</code>   </p>
<blockquote>
<p><strong><em>Note</em></strong>: The command will <strong>replace</strong> the <em>pull-secret</em> with the file's contents.  </p>
</blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>oc set data secret/pull-secret -n openshift-config \
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>  --from-file=.dockerconfigjson=$PULL_SECRET_LOCATION
</code></pre></div>
</li>
<li>
<p>Verify the OCP <code>pull-secret</code> using the OCP GUI  </p>
</li>
</ul>
<h3 id="create-the-ocp-imagecontentsourcepolicy-icsp">Create the OCP ImageContentSourcePolicy (ICSP)<a class="headerlink" href="#create-the-ocp-imagecontentsourcepolicy-icsp" title="Permanent link">&para;</a></h3>
<ul>
<li>Is ImageContentSourcePolicy defined for $CASE_NAME in OCP?
  <div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>oc get ImageContentSourcePolicy $CASE_NAME -o yaml  
</code></pre></div></li>
<li>Examine the file generated in <a href="#mirror-images-to-your-private-container-registry">Mirror images to your private container registry</a><br />
  <div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>view ~/.ibm-pak/data/mirror/$CASE_NAME/$CASE_VERSION/image-content-source-policy.yaml  
</code></pre></div>
  The settings should be appropriate, unless you have special reasons to modify ImageContentSourcePolicy for <code>ibm-apiconnct</code>.<br />
  <div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>oc apply -f  \
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>  ~/.ibm-pak/data/mirror/$CASE_NAME/$CASE_VERSION/image-content-source-policy.yaml  
</code></pre></div></li>
</ul>
<h3 id="connect-your-registry-to-ocp">Connect your registry to OCP<a class="headerlink" href="#connect-your-registry-to-ocp" title="Permanent link">&para;</a></h3>
<h4 id="insecure-registry"><em>Insecure</em> Registry<a class="headerlink" href="#insecure-registry" title="Permanent link">&para;</a></h4>
<p>Recommend defining insecure registries manually in OCP. Edit the <code>image.config.openshift.io/cluster</code> and insert the bastion docker registry. You might find more than one insecure docker registries in use. For example, the client might use a different registry for OCP images. Slide the current registry into the mix.  </p>
<ul>
<li>
<p>Examine existing insecure registries in OCP <br />
  <div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>oc get image.config.openshift.io/cluster -o yaml | grep -i -B2 -A4 insecureRegistries  
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>spec:
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>  registrySources:
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>    insecureRegistries:
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>    - already-here.myco.com:5000
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>status:
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>  internalRegistryHostname: image-registry.openshift-image-registry.svc:5000  
</code></pre></div>
  In this case, there is an insecure registry. Edit the YAML manually on the OCP GUI, the interactive CLI <code>oc edit</code> or by downloading the YAML file. Alternatively, you could use <code>oc patch</code> with carefully composed JSON which specifies current and additonal registries. </p>
</li>
<li>
<p>The following command will result in a single insecure registry, even if there were others in the list.<br />
<strong><em>For lab use only</em></strong>:
  <div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>oc patch image.config.openshift.io/cluster --type=merge \
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>  -p &#39;{&quot;spec&quot;:{&quot;registrySources&quot;:{&quot;insecureRegistries&quot;:[&quot;&#39;$TARGET_REGISTRY&#39;&quot;]}}}&#39;  
</code></pre></div></p>
</li>
</ul>
<blockquote>
<h4 id="call-out-2-secure-registry"><a href="#connect-your-secure-registry-to-ocp"><em>Call Out 2</em> <em>Secure</em> Registry</a><a class="headerlink" href="#call-out-2-secure-registry" title="Permanent link">&para;</a></h4>
<h4 id="return-from-call-out-2">Return from Call Out 2<a class="headerlink" href="#return-from-call-out-2" title="Permanent link">&para;</a></h4>
</blockquote>
<h3 id="install-catalog-sources">Install Catalog Sources<a class="headerlink" href="#install-catalog-sources" title="Permanent link">&para;</a></h3>
<blockquote>
<p><strong><em>Note</em></strong>: Ensure all <strong>Nodes</strong> &amp; <strong>MachineConfigPools</strong> are Ready.  </p>
</blockquote>
<p><a href="https://www.ibm.com/docs/en/cloud-paks/cp-integration/2022.4?topic=images-adding-catalog-sources-cluster">Adding catalog sources to a cluster</a>, section <strong><em>Adding specific catalog sources for each operator</em></strong>:  </p>
<ul>
<li>
<p>Apply catalog sources<br />
    <div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a># oc apply -f ~/.ibm-pak/data/mirror/${CASE_NAME}/${CASE_VERSION}/catalog-sources.yaml
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>catalogsource.operators.coreos.com/cloud-native-postgresql-catalog created
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>catalogsource.operators.coreos.com/ibm-apiconnect-catalog created
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>catalogsource.operators.coreos.com/opencloud-operators created
</code></pre></div></p>
</li>
<li>
<p>Apply <strong>\$ARCH</strong> specific catalog sources, if such files exist:
    <div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a># oc apply -f \
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>  ~/.ibm-pak/data/mirror/${CASE_NAME}/${CASE_VERSION}/catalog-sources-linux-${ARCH}.yaml
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>catalogsource.operators.coreos.com/ibm-datapower-operator-catalog created
</code></pre></div></p>
</li>
<li>List catalog sources defined in OCP:<br />
    <div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a># oc get catalogsource -n openshift-marketplace
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>NAME                              DISPLAY                                             TYPE   PUBLISHER   AGE
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>certified-operators               Certified Operators                                 grpc   Red Hat     5h39m
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>cloud-native-postgresql-catalog   ibm-cloud-native-postgresql-4.8.0+20221102.113620   grpc   IBM         2m48s
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>community-operators               Community Operators                                 grpc   Red Hat     5h39m
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>ibm-apiconnect-catalog            ibm-apiconnect-4.0.2                                grpc   IBM         2m48s
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>ibm-datapower-operator-catalog    ibm-datapower-operator-1.6.5-linux-amd64            grpc   IBM         70s
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>opencloud-operators               ibm-cp-common-services-1.17.0                       grpc   IBM         2m48s
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>redhat-marketplace                Red Hat Marketplace                                 grpc   Red Hat     5h39m
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a>redhat-operators                  Red Hat Operators                                   grpc   Red Hat     5h39m
</code></pre></div></li>
</ul>
<h3 id="install-operators-api-connect">Install Operators &amp; API Connect<a class="headerlink" href="#install-operators-api-connect" title="Permanent link">&para;</a></h3>
<p>You can proceed to create a namespace, storage classes, install the IBM API Connect operator in the desired namespace and create an instance of APIC.</p>
<hr />
<hr />
<h2 id="update-apic-with-new-release">Update APIC with new release<a class="headerlink" href="#update-apic-with-new-release" title="Permanent link">&para;</a></h2>
<!-- >***To Do***: Validate update. ***Done***    -->

<p>When there is new release of APIC, you can update the existing registry. For example, the registry was built with <code>CASE_NAME=ibm-apiconnect</code> &amp; <code>CASE_VERSION=4.0.2</code>.</p>
<ul>
<li>
<p>Tweak the environment variables 
  Set <code>CASE_VERSION=4.0.3</code>. The other environment variables stay the same. Verify values with: <br />
  <div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a># echo $CASE_NAME
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>ibm-apiconnect
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a># echo $CASE_VERSION
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>4.0.3
</code></pre></div></p>
</li>
<li>
<p>Download the API Connect image inventory<br />
  <div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>oc ibm-pak get $CASE_NAME \
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>  --version $CASE_VERSION  
</code></pre></div></p>
</li>
<li>
<p>Generate mirror manifests
  <div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>oc ibm-pak generate mirror-manifests \
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>  $CASE_NAME $TARGET_REGISTRY --version $CASE_VERSION  
</code></pre></div></p>
</li>
<li>
<p>Mirror images to the TARGET_REGISTRY  </p>
<blockquote>
<p><strong><em>Note</em></strong>: We presume that credentials and entitlement keys have not changed.<br />
  <div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>export REGISTRY_AUTH_FILE=/opt/registry/auth/cp-auth.json  
</code></pre></div>
  Use the <code>nohup oc image mirror</code> command appropriate for your <strong><em>insecure</em></strong> or <strong>secure</strong> bastion registry from  <a href="#populate-bastion-with-images">Populate bastion with images</a></p>
</blockquote>
</li>
<li>
<p>Image Content Source Policy (ICSP) <br />
  Apply the new ICSP (might not have changed).
    <div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>oc apply -f  \
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>  ~/.ibm-pak/data/mirror/$CASE_NAME/$CASE_VERSION/image-content-source-policy.yaml  
</code></pre></div></p>
</li>
<li>
<p>Install Catalog Sources  </p>
<blockquote>
<p><strong><em>Note</em></strong>:  Examine <code>~/.ibm-pak/data/mirror/${CASE_NAME}/${CASE_VERSION}</code> to determine if there any <strong>\$ARCH</strong> specific <code>catalog-sources</code> files.  </p>
</blockquote>
<ul>
<li>
<p>Apply catalog sources<br />
  <div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>oc apply -f ~/.ibm-pak/data/mirror/${CASE_NAME}/${CASE_VERSION}/catalog-sources.yaml
</code></pre></div></p>
</li>
<li>
<p>Apply <strong>\$ARCH</strong> specific catalog sources<br />
  <div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>oc apply -f \
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>  ~/.ibm-pak/data/mirror/${CASE_NAME}/${CASE_VERSION}/catalog-sources-linux-${ARCH}.yaml
</code></pre></div></p>
</li>
<li>List catalog sources defined in OCP:<br />
  <div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>oc get catalogsource -n openshift-marketplace
</code></pre></div></li>
</ul>
</li>
<li>
<p>Update APIC on OCP web console<br />
  Subscribe to APIC Operator Channel v3.2 and Operator Version 3.2.1, which corresponds to CASE_VERSION 4.0.3. Reference: <a href="https://www.ibm.com/docs/en/api-connect/10.0.5.x_lts?topic=installation-operator-operand-case-versions">Operator, operand, and CASE versions</a>.</p>
</li>
<li>Follow upgrade steps in the IBM API Connect document  </li>
</ul>
<hr />
<hr />
<h2 id="rebuild-bastion-repository">Rebuild bastion repository<a class="headerlink" href="#rebuild-bastion-repository" title="Permanent link">&para;</a></h2>
<p>In case you need to <strong>rebuild</strong> the bastion repository, follow the steps below to build a replica of the images in the old registry.  </p>
<h3 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h3>
<ul>
<li>Setup OS &amp; OCP/CP4I bastion tools<br />
<a href="#configure-linux-bastion">Configure Linux Bastion</a></li>
<li>Use the same values for:<br />
  CASE_NAME<br />
  CASE_VERSION<br />
  ARCH  </li>
<li>
<p>Files from the old bastion<br />
  Assuming the old bastion was built with <code>ibm-pak</code>:  </p>
<ul>
<li>Config <br />
  Transfer the file <code>.ibm-pak/config/config.yaml</code> to the same path in the new bastion.  </li>
<li>CASE files<br />
  Transfer files in <code>~/.ibm-pak/data/cases</code> to the new bastion using the same directory path.  </li>
</ul>
<blockquote>
<p><strong><em>Note</em></strong>: Backup <code>~/.ibm-pak</code> as safety net.</p>
</blockquote>
</li>
</ul>
<h3 id="build-the-new-bastion">Build the new bastion<a class="headerlink" href="#build-the-new-bastion" title="Permanent link">&para;</a></h3>
<ul>
<li>Create the podman registry<br />
  Follow the recipe in <a href="#create-your-private-container-registry">Create your private container registry</a>.   </li>
<li><a href="#mirror-images-to-your-private-container-registry">Mirror images to your private container registry</a>   <ul>
<li>Section <a href="#setup-ibm-pak">Setup ibm-pak</a><br />
  Start at <strong>Generate mirror manifests</strong> .   <blockquote>
<p><strong><em>Note</em></strong>: The prior steps, especially <code>oc ibm-pak get $CASE_NAME --version $CASE_VERSION</code> will create a new manifest which is likely to lead to a different set of images, not a replica of the old bastion.  </p>
</blockquote>
</li>
<li>Section <a href="#populate-bastion-with-images">Populate bastion with images</a> <br />
  Run all steps.  </li>
<li>Section <a href="#configure-the-ocp-cluster">Configure the OCP cluster</a><br />
  Run all steps.  </li>
</ul>
</li>
<li>Verify installation<br />
  IBM API Connect, DataPower &amp; Common (Foundational) Services should be unaffected as the podman registry contains the same imagess as the old bastion.  </li>
</ul>
<hr />
<hr />
<h2 id="call-outs-for-secure-registry">Call Outs for Secure Registry<a class="headerlink" href="#call-outs-for-secure-registry" title="Permanent link">&para;</a></h2>
<h3 id="create-a-secure-container-registry">Create a <em>secure</em> container registry<a class="headerlink" href="#create-a-secure-container-registry" title="Permanent link">&para;</a></h3>
<p>If your enterprise requires secure communications, you should obtain TLS <em>.crt</em> &amp; <em>.key</em> files appropriate for the bastion host. Self signed certificates do not result in <em>secure</em> registries unless you define trusts on the bastion server and on OCP. This document provides steps to create and use self signed TLS. For corporate TLS, you might not need to prime trust settings on the bastion server.    </p>
<p>Please see <a href="https://www.redhat.com/sysadmin/simple-container-registry">How to implement a simple personal/private Linux container image registry for internal use</a> section <strong><em>Start the registry</em></strong> for details. This document details steps to create and use self signed TLS.    </p>
<!-- >***To Do*** Validate self signed certs  ***Done*** -->
<p>If you really wish to use self signed certificates, see <a href="https://docs.openshift.com/container-platform/4.10/cicd/builds/setting-up-trusted-ca.html">Setting up additional trusted certificate authorities for builds </a>.  </p>
<h4 id="myca-authority"><em>MyCA</em> Authority<a class="headerlink" href="#myca-authority" title="Permanent link">&para;</a></h4>
<ul>
<li>Generate the private key<br />
<code>openssl genrsa -out my-ca-privkey.pem 2048</code>   </li>
<li>Create <em>MyCA</em> certificate <br />
    The <em>subject</em> parameters are in <a href="../scripts/airgap/ca-cert.conf"><strong>ca-cert.conf</strong></a><br />
      <div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>openssl req -new -x509 -days 3650 -key my-ca-privkey.pem \
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>  -out my-ca-cert.pem -config ca-cert.conf 
</code></pre></div></li>
<li>Make <em>MyCA</em> a trusted authority on bastion server<br />
    <div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>cp my-ca-cert.pem /etc/pki/ca-trust/source/anchors/ 
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>update-ca-trust  
</code></pre></div></li>
<li>Verify #1<br />
    <div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>trust list --filter=ca-anchors | grep Ravi -i -A 2 -B 3
</code></pre></div>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>pkcs11:id=%1D%4C%1C%66%06%A7%2D%D7%9B%B9%C9%90%4B%3A%3E%0D%62%75%E3%F6;type=cert
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>    type: certificate
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a>    label: Ravi CA
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a>    trust: anchor
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a>    category: authority
</code></pre></div></li>
<li>Verify #2<br />
    <div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>awk -v cmd=&#39;openssl x509 -noout -subject&#39; &#39;/BEGIN/{close(cmd)};{print | cmd}&#39; \
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a>  &lt; /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem | grep Ravi
</code></pre></div>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>Could not read certificate from &lt;stdin&gt;
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a>Unable to load certificate
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a>subject=C = US, ST = NY, L = Ether, O = MyCA, OU = MyCAOrg, CN = Ravi CA  
</code></pre></div></li>
</ul>
<h4 id="bastion-tls-key-cert">Bastion TLS key &amp; cert<a class="headerlink" href="#bastion-tls-key-cert" title="Permanent link">&para;</a></h4>
<ul>
<li>Generate the private key &amp; certificate signing request<br />
    The <em>subject</em> parameters are in <a href="../scripts/airgap/bastion.conf"><strong>bastion.conf</strong></a>: <br />
    <div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>openssl genrsa -out bastion-privkey.pem 2048  
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>openssl req -new -key bastion-privkey.pem -out bastion.csr -config bastion.conf 
</code></pre></div></li>
<li>Create the bastion certificate<br />
<code>openssl x509 -req -in bastion.csr -CA my-ca-cert.pem -CAkey my-ca-privkey.pem \
      -out bastion-cert.pem -CAcreateserial -days 265 -sha256 \
      -extensions v3_req -extfile bastion.conf</code></li>
<li>
<p>Examine the bastion certificate<br />
    <div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>openssl x509 -noout -text -in bastion-cert.pem   
</code></pre></div>
    An alternate approach to examine Subject Alternate Name (SAN):<br />
    <div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>openssl x509 -text -noout -certopt \
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>  no_subject,no_header,no_version,no_serial,no_signame,no_validity\
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a>  -certopt no_issuer,no_pubkey,no_sigdump,no_aux \
<a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a>  -ext subjectAltName -in bastion-cert.pem   
</code></pre></div>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>        X509v3 extensions:
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>            X509v3 Subject Alternative Name: 
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a>                DNS:onyx1.myco.com
<a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a>X509v3 Subject Alternative Name: 
<a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a>    DNS:onyx1.myco.com
</code></pre></div></p>
</li>
<li>
<p>Place the files in <code>/opt/registry/certs/</code><br />
    <div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>cp bastion-privkey.pem /opt/registry/certs/
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>cp bastion-cert.pem /opt/registry/certs/
</code></pre></div></p>
</li>
</ul>
<h4 id="start-the-secure-registry">Start the <em>secure</em> registry<a class="headerlink" href="#start-the-secure-registry" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>podman run -d --name apic-registry -p 5000:5000 \
<a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a>  -v /opt/registry/data:/var/lib/registry \
<a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a>  -v /opt/registry/auth:/auth \
<a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a>  -e &quot;REGISTRY_AUTH=htpasswd&quot; \
<a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a>  -e &quot;REGISTRY_AUTH_HTPASSWD_REALM=Registry Realm&quot; \
<a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a>  -e REGISTRY_AUTH_HTPASSWD_PATH=/auth/htpasswd \
<a id="__codelineno-44-7" name="__codelineno-44-7" href="#__codelineno-44-7"></a>  -v /opt/registry/certs:/certs:z \
<a id="__codelineno-44-8" name="__codelineno-44-8" href="#__codelineno-44-8"></a>  -e &quot;REGISTRY_HTTP_TLS_CERTIFICATE=/certs/bastion-cert.pem&quot; \
<a id="__codelineno-44-9" name="__codelineno-44-9" href="#__codelineno-44-9"></a>  -e &quot;REGISTRY_HTTP_TLS_KEY=/certs/bastion-privkey.pem&quot; \
<a id="__codelineno-44-10" name="__codelineno-44-10" href="#__codelineno-44-10"></a>  --restart=always \
<a id="__codelineno-44-11" name="__codelineno-44-11" href="#__codelineno-44-11"></a>  docker.io/library/registry:2  
</code></pre></div>
<h4 id="verify-the-registrys-certificate">Verify the registry's certificate<a class="headerlink" href="#verify-the-registrys-certificate" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a># echo | openssl s_client -connect $TARGET_REGISTRY -servername `hostname -f` \
<a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>  | grep -B6 &quot;Verification&quot;  
<a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a>depth=1 C = US, ST = NY, L = Ether, O = MyCA, OU = MyCAOrg, CN = Ravi CA
<a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a>verify return:1
<a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a>depth=0 C = US, ST = FL, L = Gainesville, O = MyCo, OU = APIC, CN = onyx1.myco.com
<a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a>verify return:1
<a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a>No client certificate CA names sent
<a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a>Peer signing digest: SHA256
<a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a>Peer signature type: RSA-PSS
<a id="__codelineno-45-10" name="__codelineno-45-10" href="#__codelineno-45-10"></a>Server Temp Key: X25519, 253 bits
<a id="__codelineno-45-11" name="__codelineno-45-11" href="#__codelineno-45-11"></a>
<a id="__codelineno-45-12" name="__codelineno-45-12" href="#__codelineno-45-12"></a>SSL handshake has read 1391 bytes and written 386 bytes
<a id="__codelineno-45-13" name="__codelineno-45-13" href="#__codelineno-45-13"></a>DONE
<a id="__codelineno-45-14" name="__codelineno-45-14" href="#__codelineno-45-14"></a>Verification: OK
</code></pre></div>
<h4 id="verify-access-to-secure-registry">Verify access to secure registry<a class="headerlink" href="#verify-access-to-secure-registry" title="Permanent link">&para;</a></h4>
<blockquote>
<p><strong><em>Note</em></strong>: Do not use the <code>-k</code> option to bypass TLS.  </p>
</blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a># curl --user &lt;username:pswd&gt; https://$TARGET_REGISTRY/v2/_catalog
<a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a>{&quot;repositories&quot;:[]}
</code></pre></div>
<blockquote>
<p><a href="#return-from-call-out-1"><strong><em>Return to Call Out 1</em></strong></a>  </p>
</blockquote>
<hr />
<h3 id="connect-your-secure-registry-to-ocp">Connect your <em>secure</em> registry to OCP<a class="headerlink" href="#connect-your-secure-registry-to-ocp" title="Permanent link">&para;</a></h3>
<h4 id="secure-registry"><em>Secure</em> Registry<a class="headerlink" href="#secure-registry" title="Permanent link">&para;</a></h4>
<p>You need to provide OCP with TLS credentials to trust the bastion image registry. <a href="https://docs.openshift.com/container-platform/4.10/cicd/builds/setting-up-trusted-ca.html">Setting up additional trusted certificate authorities for builds</a> provides the steps.  </p>
<ul>
<li>Create a ConfigMap in the <code>openshift-config</code> namespace containing the trusted certificates for the registries that use self-signed certificates. For each CA file, ensure the key in the ConfigMap is the hostname of the registry in the <code>hostname[..port]</code> format:<br />
  <div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>oc create configmap registry-cas -n openshift-config \
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>--from-file=`hostname -f`..5000=/etc/pki/ca-trust/source/anchors/my-ca-cert.pem 
</code></pre></div></li>
</ul>
<p>If you have multiple registries, place them all in <code>registry-cas</code> with multiple <code>--from-file</code> entries.  </p>
<ul>
<li>
<p>Modify in the cluster image configuration in <code>image.config.openshift.io/cluster</code>:  <br />
    Recommend editing the <code>image.config.openshift.io/cluster</code> manually through the OCP GUI or CLI:<br />
<code>oc edit image.config.openshift.io/cluster</code><br />
    <div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>spec:
<a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a>  additionalTrustedCA:
<a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a>    name: registry-cas
<a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a>  allowedRegistriesForImport:
<a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a>    - domainName: &#39;&lt;$TARGET_REGISTRY&gt;&#39;
<a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a>      insecure: false
</code></pre></div>
    Define additional <code>- domainName</code> entries for each <em>secure</em> registry.  </p>
<p>The image configuration entries in your installation might contain more entries. For an example, see <strong><code>image.config.openshift.io/cluster CR</code></strong> in <strong>Procedure Item 1</strong> of <a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.10/html/images/image-configuration#images-configuration-shortname_image-configuration">9.2.4. Adding registries that allow image short names</a></p>
</li>
</ul>
<blockquote>
<p><a href="#return-from-call-out-2"><strong><em>Return to Call Out 2</em></strong></a></p>
</blockquote>
<hr />
<hr />
<h2 id="references">References<a class="headerlink" href="#references" title="Permanent link">&para;</a></h2>
<h4 id="docker-podman-registries">Docker / Podman Registries<a class="headerlink" href="#docker-podman-registries" title="Permanent link">&para;</a></h4>
<ul>
<li><a href="https://www.redhat.com/sysadmin/simple-container-registry">How to implement a simple personal/private Linux container image registry for internal use</a> <br />
  Explains <code>podman</code> command to create a secure image registry. If you have a corporate TLS,this is all you need. If you need to create self signed TLS, there are other reference documents.  </li>
<li><a href="https://docs.openshift.com/container-platform/4.10/cicd/builds/setting-up-trusted-ca.html">Setting up additional trusted certificate authorities for builds </a> <br />
  Provides steps to define TLS trust in OCP whether you have a corporate or self signed TLS.  </li>
<li><a href="https://httpd.apache.org/docs/trunk/programs/htpasswd.html">htpasswd - Manage user files for basic authentication</a>  </li>
</ul>
<h4 id="general-interest">General Interest<a class="headerlink" href="#general-interest" title="Permanent link">&para;</a></h4>
<ul>
<li><a href="https://cloud.redhat.com/blog/is-your-operator-air-gap-friendly">Is your Operator Air-Gap Friendly?</a></li>
<li><a href="https://docs.openshift.com/container-platform/4.10/installing/disconnected_install/index.html">Disconnected installation mirroring</a></li>
<li><a href="https://www.redhat.com/sysadmin/ca-certificates-cli">Making CA certificates available to Linux command-line tools</a></li>
<li><a href="https://curl.se/docs/sslcerts.html">SSL Certificate Verification</a></li>
<li><a href="https://www.golinuxcloud.com/add-x509-extensions-to-certificate-openssl/#Scenario-2_Add_X509_extensions_to_Certificate_Signing_Request_CSR">Add X.509 extensions to Certificate Signing Request (CSR)</a></li>
<li><a href="https://access.redhat.com/documentation/en-us/red_hat_quay/3/html/manage_red_hat_quay/using-ssl-to-protect-quay">Using SSL to protect connections to Red Hat Quay</a></li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate", "content.tooltips", "navigation.instant", "navigation.indexes", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
    
  </body>
</html>